# ìœ í˜•#03 í˜ì´ì§€ ë¶„í•  ë¡œì§ ë¬¸ì„œ

## ğŸ“‹ ê°œìš”

ìœ í˜•#03 (ë¹ˆì¹¸ ë‹¨ì–´ ì¶”ë¡  ë¬¸ì œ)ì˜ ì¸ì‡„(ì •ë‹µ) í˜ì´ì§€ì—ì„œ ë™ì  í˜ì´ì§€ ë¶„í•  ë¡œì§ì— ëŒ€í•œ ìƒì„¸ ë¬¸ì„œì…ë‹ˆë‹¤.

## ğŸ¯ ëª©ì 

A4 í˜ì´ì§€ì˜ ì œí•œëœ ê³µê°„ ë‚´ì—ì„œ ë¬¸ì œì˜ ê° ì„¹ì…˜ì„ íš¨ìœ¨ì ìœ¼ë¡œ ë°°ì¹˜í•˜ì—¬, ë‚´ìš©ì´ ì˜ë¦¬ì§€ ì•Šë„ë¡ ìë™ìœ¼ë¡œ í˜ì´ì§€ë¥¼ ë¶„í• í•˜ëŠ” ë¡œì§ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

## ğŸ“ A4 í˜ì´ì§€ ì„¤ì • (px ë‹¨ìœ„)

```typescript
const A4_CONFIG = {
  PAGE_HEIGHT: 1123,        // px (29.7cm * 37.8px/cm)
  HEADER_HEIGHT: 19,        // px (0.5cm * 37.8px/cm)
  CONTENT_MARGIN: 38,       // px (1.0cm * 37.8px/cm)
  INSTRUCTION_HEIGHT: 30,   // px (0.8cm * 37.8px/cm)
  INSTRUCTION_MARGIN: 11,   // px (0.3cm * 37.8px/cm)
  TRANSLATION_HEADER_HEIGHT: 30,  // px (0.8cm * 37.8px/cm)
  TRANSLATION_HEADER_MARGIN: 11,  // px (0.3cm * 37.8px/cm)
  OPTIONS_HEADER_HEIGHT: 30,      // px (0.8cm * 37.8px/cm)
  OPTIONS_HEADER_MARGIN: 11,      // px (0.3cm * 37.8px/cm)
};
```

## ğŸ§® ì»¨í…Œì´ë„ˆ ë†’ì´ ê³„ì‚°

### 1. í…ìŠ¤íŠ¸ ë†’ì´ ê³„ì‚° í•¨ìˆ˜

```typescript
function calculateContainerHeight(text: string, padding: number = 38, fontSize: number = 16, lineHeight: number = 1.7): number {
  const availableWidthPx = 680; // px (18cm)
  const charWidthPx = fontSize * 0.55; // px ë‹¨ìœ„ ë¬¸ì í­
  const charsPerLine = Math.floor(availableWidthPx / charWidthPx);
  const lines = Math.ceil(text.length / charsPerLine);
  return (lines * fontSize * lineHeight) + padding; // px ë‹¨ìœ„ë¡œ ë°˜í™˜
}
```

### 2. ê° ì„¹ì…˜ë³„ ë†’ì´ ê³„ì‚°

#### A. ë¬¸ì œ ì œëª© + ì˜ì–´ ë³¸ë¬¸ ì»¨í…Œì´ë„ˆ
```typescript
const problemTitleHeight = A4_CONFIG.INSTRUCTION_HEIGHT + A4_CONFIG.INSTRUCTION_MARGIN; // 41px
const englishPassageHeight = calculateContainerHeight(quiz.blankedText, 38, 16, 1.7);
const sectionAHeight = problemTitleHeight + englishPassageHeight;
```

#### B. 4ì§€ì„ ë‹¤ ì„ íƒí•­ëª© ì»¨í…Œì´ë„ˆ
```typescript
const optionsHeaderHeight = A4_CONFIG.OPTIONS_HEADER_HEIGHT + A4_CONFIG.OPTIONS_HEADER_MARGIN; // 41px
let optionsHeight = 0;
quiz.options.forEach(option => {
  optionsHeight += calculateContainerHeight(`${option} (ì •ë‹µ)`, 11, 16, 1.3);
});
const sectionBHeight = optionsHeaderHeight + optionsHeight;
```

#### C. ë³¸ë¬¸í•´ì„ ì œëª© + í•œê¸€ í•´ì„ ì»¨í…Œì´ë„ˆ
```typescript
const translationHeaderHeight = A4_CONFIG.TRANSLATION_HEADER_HEIGHT + A4_CONFIG.TRANSLATION_HEADER_MARGIN; // 41px
const translationHeight = calculateContainerHeight(translatedText, 38, 16, 1.7);
const sectionCHeight = translationHeaderHeight + translationHeight;
```

## ğŸ“„ í˜ì´ì§€ ë¶„í•  ë¡œì§

### 1. ì´ìš© ê°€ëŠ¥í•œ ê³µê°„ ê³„ì‚°

```typescript
// A4 í˜ì´ì§€ì˜ í—¤ë”ë¥¼ ì œì™¸í•œ ë°°ì¹˜ ê°€ëŠ¥í•œ ê³µê°„
const availableHeight = A4_CONFIG.PAGE_HEIGHT - A4_CONFIG.HEADER_HEIGHT - A4_CONFIG.CONTENT_MARGIN;
// 1123 - 19 - 38 = 1066px

// ì•ˆì „ ë§ˆì§„ ì ìš©
const safetyMargin = 76; // px (2.0cm)
const effectiveAvailableHeight = availableHeight - safetyMargin;
// 1066 - 76 = 990px
```

### 2. í˜ì´ì§€ ë¶„í•  ì¡°ê±´

#### ì¼€ì´ìŠ¤ 1: A+B+C â‰¤ 990px
**â†’ 1í˜ì´ì§€ì— A, B, C ëª¨ë‘ í¬í•¨**

```typescript
if (totalHeight <= effectiveAvailableHeight) {
  setPageLayoutInfo({
    needsSecondPage: false,
    needsThirdPage: false,
    page1Content: 'A+B+C',
    page2Content: '',
    page3Content: ''
  });
}
```

#### ì¼€ì´ìŠ¤ 2: A+B+C > 990px, A+B â‰¤ 990px
**â†’ 1í˜ì´ì§€ì— A+B í¬í•¨, 2í˜ì´ì§€ì— C í¬í•¨**

```typescript
else if (sectionAHeight + sectionBHeight <= effectiveAvailableHeight) {
  if (sectionCHeight <= effectiveAvailableHeight) {
    // Cê°€ í•œ í˜ì´ì§€ì— ë“¤ì–´ê°ˆ ìˆ˜ ìˆìŒ
    setPageLayoutInfo({
      needsSecondPage: true,
      needsThirdPage: false,
      page1Content: 'A+B',
      page2Content: 'C',
      page3Content: ''
    });
  } else {
    // Cê°€ í•œ í˜ì´ì§€ì— ë“¤ì–´ê°€ì§€ ì•ŠìŒ â†’ 2í˜ì´ì§€ì— C ì¼ë¶€, 3í˜ì´ì§€ì— C ë‚˜ë¨¸ì§€
    setPageLayoutInfo({
      needsSecondPage: true,
      needsThirdPage: true,
      page1Content: 'A+B',
      page2Content: 'C-part1',
      page3Content: 'C-part2'
    });
  }
}
```

#### ì¼€ì´ìŠ¤ 3: A+B+C > 990px, A+B > 990px, A â‰¤ 990px
**â†’ 1í˜ì´ì§€ì— A í¬í•¨, 2í˜ì´ì§€ì— B+C í¬í•¨**

```typescript
else if (sectionAHeight <= effectiveAvailableHeight) {
  if (sectionBHeight + sectionCHeight <= effectiveAvailableHeight) {
    // B+Cê°€ í•œ í˜ì´ì§€ì— ë“¤ì–´ê°ˆ ìˆ˜ ìˆìŒ
    setPageLayoutInfo({
      needsSecondPage: true,
      needsThirdPage: false,
      page1Content: 'A',
      page2Content: 'B+C',
      page3Content: ''
    });
  } else {
    // B+Cê°€ í•œ í˜ì´ì§€ì— ë“¤ì–´ê°€ì§€ ì•ŠìŒ â†’ 2í˜ì´ì§€ì— B, 3í˜ì´ì§€ì— C
    setPageLayoutInfo({
      needsSecondPage: true,
      needsThirdPage: true,
      page1Content: 'A',
      page2Content: 'B',
      page3Content: 'C'
    });
  }
}
```

#### ì¼€ì´ìŠ¤ 4: A+B+C > 990px, A+B > 990px, A > 990px
**â†’ 1í˜ì´ì§€ì— A í¬í•¨, 2í˜ì´ì§€ì— B í¬í•¨, 3í˜ì´ì§€ì— C í¬í•¨**

```typescript
else {
  setPageLayoutInfo({
    needsSecondPage: true,
    needsThirdPage: true,
    page1Content: 'A',
    page2Content: 'B',
    page3Content: 'C'
  });
}
```

## ğŸ¨ ë Œë”ë§ ë¡œì§

### 1. ì¡°ê±´ë¶€ ë Œë”ë§

ê° í˜ì´ì§€ì—ì„œ í•´ë‹¹í•˜ëŠ” ì„¹ì…˜ë§Œ ë Œë”ë§:

```typescript
{/* 1í˜ì´ì§€ */}
{(pageLayoutInfo.page1Content.includes('A') || pageLayoutInfo.page1Content === 'A') && (
  // A. ë¬¸ì œ ì œëª© + ì˜ì–´ ë³¸ë¬¸ ì»¨í…Œì´ë„ˆ
)}

{(pageLayoutInfo.page1Content.includes('B') || pageLayoutInfo.page1Content === 'B') && (
  // B. 4ì§€ì„ ë‹¤ ì„ íƒí•­ëª© ì»¨í…Œì´ë„ˆ
)}

{(pageLayoutInfo.page1Content.includes('C') || pageLayoutInfo.page1Content === 'C') && (
  // C. ë³¸ë¬¸í•´ì„ ì œëª© + í•œê¸€ í•´ì„ ì»¨í…Œì´ë„ˆ
)}
```

### 2. A4 í…œí”Œë¦¿ ì‚¬ìš©

ê° í˜ì´ì§€ëŠ” `a4-page-template` í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ A4 í¬ê¸°ë¡œ ë Œë”ë§:

```typescript
<div className="a4-page-template">
  <div className="a4-page-header">
    <PrintHeaderWork01 />
  </div>
  <div className="a4-page-content">
    <div className="quiz-content">
      {/* í•´ë‹¹ í˜ì´ì§€ì˜ ì»¨í…ì¸  */}
    </div>
  </div>
</div>
```

## ğŸ” ë””ë²„ê¹… ë¡œê·¸

í˜ì´ì§€ ë¶„í•  ê³„ì‚° ê³¼ì •ì„ ì¶”ì í•˜ê¸° ìœ„í•œ ë¡œê·¸:

```typescript
console.log('ğŸ“ ìœ í˜•#03 ë™ì  í˜ì´ì§€ ë¶„í•  ê³„ì‚°:', {
  availableHeight: availableHeight.toFixed(2) + 'px',
  sectionAHeight: sectionAHeight.toFixed(2) + 'px',
  sectionBHeight: sectionBHeight.toFixed(2) + 'px',
  sectionCHeight: sectionCHeight.toFixed(2) + 'px',
  totalHeight: (sectionAHeight + sectionBHeight + sectionCHeight).toFixed(2) + 'px',
  effectiveAvailableHeight: effectiveAvailableHeight.toFixed(2) + 'px',
  quizTextLength: quiz.blankedText.length,
  translationTextLength: translatedText.length
});
```

## ğŸ“Š ì˜ˆì‹œ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì§§ì€ ë¬¸ì œ
- A: 200px, B: 150px, C: 300px
- ì´í•©: 650px â‰¤ 990px
- **ê²°ê³¼**: 1í˜ì´ì§€ì— ëª¨ë“  ë‚´ìš© í¬í•¨

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì¤‘ê°„ ê¸¸ì´ ë¬¸ì œ
- A: 300px, B: 200px, C: 600px
- ì´í•©: 1100px > 990px
- A+B: 500px â‰¤ 990px
- **ê²°ê³¼**: 1í˜ì´ì§€ì— A+B, 2í˜ì´ì§€ì— C

### ì‹œë‚˜ë¦¬ì˜¤ 3: ê¸´ ë¬¸ì œ
- A: 400px, B: 300px, C: 500px
- ì´í•©: 1200px > 990px
- A+B: 700px â‰¤ 990px
- **ê²°ê³¼**: 1í˜ì´ì§€ì— A+B, 2í˜ì´ì§€ì— C

### ì‹œë‚˜ë¦¬ì˜¤ 4: ë§¤ìš° ê¸´ ë¬¸ì œ
- A: 500px, B: 400px, C: 600px
- ì´í•©: 1500px > 990px
- A+B: 900px â‰¤ 990px
- **ê²°ê³¼**: 1í˜ì´ì§€ì— A+B, 2í˜ì´ì§€ì— C

### ì‹œë‚˜ë¦¬ì˜¤ 5: ê·¹ë„ë¡œ ê¸´ ë¬¸ì œ
- A: 1200px, B: 300px, C: 400px
- ì´í•©: 1900px > 990px
- A+B: 1500px > 990px
- A: 1200px > 990px
- **ê²°ê³¼**: 1í˜ì´ì§€ì— A, 2í˜ì´ì§€ì— B, 3í˜ì´ì§€ì— C

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ë‹¨ìœ„ í†µì¼**: ëª¨ë“  ê³„ì‚°ì€ px ë‹¨ìœ„ë¡œ í†µì¼
2. **ì•ˆì „ ë§ˆì§„**: 76px (2cm)ì˜ ì•ˆì „ ë§ˆì§„ ì ìš©
3. **í…ìŠ¤íŠ¸ ê¸¸ì´**: ë§¤ìš° ê¸´ í…ìŠ¤íŠ¸ì˜ ê²½ìš° ì •í™•í•œ ë†’ì´ ê³„ì‚° í•„ìš”
4. **í°íŠ¸ í¬ê¸°**: 16px ê¸°ì¤€ìœ¼ë¡œ ê³„ì‚° (ì¸ì‡„ ì‹œ 1rem = 16px)
5. **ì¤„ ê°„ê²©**: lineHeight 1.7 ì ìš©

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ì´ì „ ë¬¸ì œì 
- cmì™€ px ë‹¨ìœ„ê°€ ì„ì—¬ì„œ ê³„ì‚° ì˜¤ë¥˜ ë°œìƒ
- ë†’ì´ ê°’ì´ ë¹„ì •ìƒì ìœ¼ë¡œ ì»¤ì ¸ì„œ 3í˜ì´ì§€ë¡œ ë¶„í• ë˜ëŠ” ë¬¸ì œ

### í•´ê²° ë°©ë²•
- ëª¨ë“  ê³„ì‚°ì„ px ë‹¨ìœ„ë¡œ í†µì¼
- ì •í™•í•œ ë‹¨ìœ„ ë³€í™˜ ê³µì‹ ì ìš© (1cm = 37.8px)
- ì•ˆì „ ë§ˆì§„ì„ px ë‹¨ìœ„ë¡œ ì ìš©

## ğŸ“ ì—…ë°ì´íŠ¸ ì´ë ¥

- **2025-09-28**: ì´ˆê¸° ë¬¸ì„œ ì‘ì„±
- **2025-09-28**: px ë‹¨ìœ„ í†µì¼ë¡œ ê³„ì‚° ì˜¤ë¥˜ ìˆ˜ì •
- **2025-09-28**: ìƒì„¸í•œ ë¡œì§ ì„¤ëª… ë° ì˜ˆì‹œ ì¶”ê°€
